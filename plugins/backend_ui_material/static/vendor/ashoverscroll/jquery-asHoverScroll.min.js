/*! jQuery asHoverScroll - v0.2.3 - 2015-12-17
* https://github.com/amazingSurge/jquery-asHoverScroll
* Copyright (c) 2015 amazingSurge; Licensed GPL */
(function(e){var d="asHoverScroll";var c=0;var b=e[d]=function(g,f){this.element=g;this.$element=e(g);this.options=e.extend({},b.defaults,f,this.$element.data());this.$list=e(this.options.list,this.$element);this.classes={disabled:this.options.namespace+"-disabled"};if(this.options.direction==="vertical"){this.attributes={page:"pageY",axis:"Y",position:"top",length:"height",offset:"offsetTop",client:"clientY",clientLength:"clientHeight"}}else{if(this.options.direction==="horizontal"){this.attributes={page:"pageX",axis:"X",position:"left",length:"width",offset:"offsetLeft",client:"clientX",clientLength:"clientWidth"}}}this._states={};this._scroll={time:null,pointer:null};this.instanceId=(++c);this._trigger("init");this.init()};b.defaults={namespace:d,list:"> ul",item:"> li",exception:null,direction:"vertical",fixed:false,mouseMove:true,touchScroll:true,pointerScroll:true,useCssTransforms:true,useCssTransforms3d:true,boundary:10,throttle:20,onEnter:function(){e(this).siblings().removeClass("is-active");e(this).addClass("is-active")},onLeave:function(){e(this).removeClass("is-active")}};var a={};b.support=a;(function(j){var i=e("<support>").get(0).style,k=["webkit","Moz","O","ms"],g={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},h={csstransforms:function(){return !!l("transform")},csstransforms3d:function(){return !!l("perspective")},csstransitions:function(){return !!l("transition")},cssanimations:function(){return !!l("animation")}};function l(p,n){var m=false,o=p.charAt(0).toUpperCase()+p.slice(1);e.each((p+" "+k.join(o+" ")+o).split(" "),function(q,r){if(i[r]!==undefined){m=n?r:true;return false}});return m}function f(m){return l(m,true)}if(h.csstransitions()){j.transition=new String(f("transition"));j.transition.end=g.transition.end[j.transition]}if(h.cssanimations()){j.animation=new String(f("animation"));j.animation.end=g.animation.end[j.animation]}if(h.csstransforms()){j.transform=new String(f("transform"));j.transform3d=h.csstransforms3d()}if(("ontouchstart" in window)||window.DocumentTouch&&document instanceof window.DocumentTouch){j.touch=true}else{j.touch=false}if(window.PointerEvent||window.MSPointerEvent){j.pointer=true}else{j.pointer=false}j.convertMatrixToArray=function(m){if(m&&(m.substr(0,6)=="matrix")){return m.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}return false};j.prefixPointerEvent=function(m){return window.MSPointerEvent?"MSPointer"+m.charAt(9).toUpperCase()+m.substr(10):m}})(a);b.prototype={constructor:b,init:function(){this.initPosition();this.updateLength();this.bindEvents()},bindEvents:function(){var f=this,h=["enter"],g=[];if(this.options.mouseMove){this.$element.on(this.eventName("mousemove"),e.proxy(this.onMove,this));h.push("mouseenter");g.push("mouseleave")}if(this.options.touchScroll&&a.touch){this.$element.on(this.eventName("touchstart"),e.proxy(this.onScrollStart,this));this.$element.on(this.eventName("touchcancel"),e.proxy(this.onScrollEnd,this))}if(this.options.pointerScroll&&a.pointer){this.$element.on(this.eventName(a.prefixPointerEvent("pointerdown")),e.proxy(this.onScrollStart,this));this.$element.on(this.eventName(a.prefixPointerEvent("pointercancel")),e.proxy(this.onScrollEnd,this))}this.$list.on(this.eventName(h.join(" ")),this.options.item,function(){if(!f.is("scrolling")){f.options.onEnter.call(this)}});this.$list.on(this.eventName(g.join(" ")),this.options.item,function(){if(!f.is("scrolling")){f.options.onLeave.call(this)}});e(window).on(this.eventNameWithId("orientationchange"),function(){f.update.call(f)});e(window).on(this.eventNameWithId("resize"),this.throttle(function(){f.update.call(f)},this.options.throttle))},unbindEvents:function(){this.$element.off(this.eventName());this.$list.off(this.eventName());e(window).off(this.eventNameWithId())},onScrollStart:function(g){var f=this;if(g.which===3){return}if(e(g.target).closest(this.options.exception).length>0){return}this._scroll.time=new Date().getTime();this._scroll.pointer=this.pointer(g);this._scroll.start=this.getPosition();this._scroll.moved=false;var h=function(){f.enter("scrolling");f._trigger("scroll")};if(this.options.touchScroll&&a.touch){e(document).on(f.eventName("touchend"),e.proxy(this.onScrollEnd,this));e(document).one(f.eventName("touchmove"),e.proxy(function(){e(document).on(f.eventName("touchmove"),e.proxy(this.onScrollMove,this));h()},this))}if(this.options.pointerScroll&&a.pointer){e(document).on(f.eventName(a.prefixPointerEvent("pointerup")),e.proxy(this.onScrollEnd,this));e(document).one(f.eventName(a.prefixPointerEvent("pointermove")),e.proxy(function(){e(document).on(f.eventName(a.prefixPointerEvent("pointermove")),e.proxy(this.onScrollMove,this));h()},this))}e(document).on(f.eventName("blur"),e.proxy(this.onScrollEnd,this));g.preventDefault()},onScrollMove:function(f){this._scroll.updated=this.pointer(f);var h=this.distance(this._scroll.pointer,this._scroll.updated);if(Math.abs(this._scroll.pointer.x-this._scroll.updated.x)>10||Math.abs(this._scroll.pointer.y-this._scroll.updated.y)>10){this._scroll.moved=true}if(!this.is("scrolling")){return}f.preventDefault();var g=this._scroll.start+h;if(this.canScroll()){if(g>0){g=0}else{if(g<this.containerLength-this.listLength){g=this.containerLength-this.listLength}}this.updatePosition(g)}},onScrollEnd:function(g){var f=this;if(this.options.touchScroll&&a.touch){e(document).off(this.eventName("touchmove touchend"))}if(this.options.pointerScroll&&a.pointer){e(document).off(this.eventName(a.prefixPointerEvent("pointerup")))}e(document).off(this.eventName("blur"));if(!this._scroll.moved){e(g.target).trigger("tap")}if(!this.is("scrolling")){return}setTimeout(function(){f.leave("scrolling");f._trigger("scrolled")},500)},pointer:function(g){var f={x:null,y:null};g=this.getEvent(g);if(g.pageX&&!this.options.fixed){f.x=g.pageX;f.y=g.pageY}else{f.x=g.clientX;f.y=g.clientY}return f},getEvent:function(f){f=f.originalEvent||f||window.event;f=f.touches&&f.touches.length?f.touches[0]:f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:f;return f},distance:function(g,f){if(this.options.direction==="vertical"){return f.y-g.y}else{return f.x-g.x}},onMove:function(f){f=this.getEvent(f);if(this.is("scrolling")){return}if(this.isMatchScroll(f)){var h,i,g;if(f[this.attributes.page]&&!this.options.fixed){h=f[this.attributes.page]}else{h=f[this.attributes.client]}g=h-this.element[this.attributes.offset];if(g<this.options.boundary){i=0}else{i=(g-this.options.boundary)*this.multiplier;if(i>this.listLength-this.containerLength){i=this.listLength-this.containerLength}}this.updatePosition(-i)}},isMatchScroll:function(f){if(!this.is("disabled")&&this.canScroll()){if(this.options.exception){if(e(f.target).closest(this.options.exception).length===0){return true}else{return false}}return true}return false},canScroll:function(){return this.listLength>this.containerLength},getContainerLength:function(){return this.element[this.attributes.clientLength]},getListhLength:function(){return this.$list[0][this.attributes.clientLength]},updateLength:function(){this.containerLength=this.getContainerLength();this.listLength=this.getListhLength();this.multiplier=(this.listLength-this.containerLength)/(this.containerLength-2*this.options.boundary)},initPosition:function(){var f=this.makePositionStyle(0);this.$list.css(f)},getPosition:function(){var f;if(this.options.useCssTransforms&&a.transform){if(this.options.useCssTransforms3d&&a.transform3d){f=a.convertMatrixToArray(this.$list.css(a.transform))}else{f=a.convertMatrixToArray(this.$list.css(a.transform))}if(!f){return 0}if(this.attributes.axis==="X"){f=f[12]||f[4]}else{f=f[13]||f[5]}}else{f=this.$list.css(this.attributes.position)}return parseFloat(f.replace("px",""))},makePositionStyle:function(i){var h,f="0px",j="0px";if(this.options.useCssTransforms&&a.transform){if(this.attributes.axis==="X"){f=i+"px"}else{j=i+"px"}h=a.transform.toString();if(this.options.useCssTransforms3d&&a.transform3d){i="translate3d("+f+","+j+",0px)"}else{i="translate("+f+","+j+")"}}else{h=this.attributes.position}var g={};g[h]=i;return g},updatePosition:function(g){var f=this.makePositionStyle(g);this.$list.css(f)},update:function(){if(!this.is("disabled")){this.updateLength();if(!this.canScroll()){this.initPosition()}}},eventName:function(g){if(typeof g!=="string"||g===""){return"."+d}g=g.split(" ");var h=g.length;for(var f=0;f<h;f++){g[f]=g[f]+"."+d}return g.join(" ")},eventNameWithId:function(g){if(typeof g!=="string"||g===""){return this.options.namespace+"-"+this.instanceId}g=g.split(" ");var h=g.length;for(var f=0;f<h;f++){g[f]=g[f]+"."+this.options.namespace+"-"+this.instanceId}return g.join(" ")},_trigger:function(g){var f=Array.prototype.slice.call(arguments,1),i=[this].concat(f);this.$element.trigger(d+"::"+g,i);g=g.replace(/\b\w+\b/g,function(j){return j.substring(0,1).toUpperCase()+j.substring(1)});var h="on"+g;if(typeof this.options[h]==="function"){this.options[h].apply(this,f)}},is:function(f){return this._states[f]&&this._states[f]>0},enter:function(f){if(this._states[f]===undefined){this._states[f]=0}this._states[f]++},leave:function(f){this._states[f]--},throttle:function(g,j){var h=Date.now||function(){return new Date().getTime()};var f,l,n;var m=null;var k=0;var i=function(){k=h();m=null;n=g.apply(f,l);f=l=null};return function(){var o=h();var p=j-(o-k);f=this;l=arguments;if(p<=0){clearTimeout(m);m=null;k=o;n=g.apply(f,l);f=l=null}else{if(!m){m=setTimeout(i,p)}}return n}},enable:function(){if(this.is("disabled")){this.leave("disabled");this.$element.removeClass(this.classes.disabled);this.bindEvents()}},disable:function(){if(!this.is("disabled")){this.enter("disabled");this.initPosition();this.$element.addClass(this.classes.disabled);this.unbindEvents()}},destory:function(){this.$element.removeClass(this.classes.disabled);this.unbindEvents();this.$element.data(d,null);this._trigger("destory")}};e.fn[d]=function(f){if(typeof f==="string"){var i=f;var g=Array.prototype.slice.call(arguments,1);if(/^\_/.test(i)){return false}else{if((/^(get)/.test(i))){var h=this.first().data(d);if(h&&typeof h[i]==="function"){return h[i].apply(h,g)}}else{return this.each(function(){var j=e.data(this,d);if(j&&typeof j[i]==="function"){j[i].apply(j,g)}})}}}else{return this.each(function(){if(!e.data(this,d)){e.data(this,d,new b(this,f))}})}}})(jQuery);