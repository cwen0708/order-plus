/*! jQuery asScroll - v0.1.1 - 2015-05-11
* https://github.com/amazingSurge/jquery-asScroll
* Copyright (c) 2015 amazingSurge; Licensed GPL */
(function(g,k,e,b){var h=0;var c=function(){if(typeof g.performance!=="undefined"&&g.performance.now){return g.performance.now()}else{return Date.now()}};var i=function(m){return typeof m==="string"&&m.indexOf("%")!==-1};var d=function(m){return parseFloat(m.slice(0,-1)/100,10)};var l=(function(){return g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||function(m){g.setTimeout(m,1000/60)}})();var f=(function(){return g.cancelAnimationFrame||g.webkitCancelAnimationFrame||g.mozCancelAnimationFrame||function(m){g.clearTimeout(m)}})();var a=function(v,p,u,o){function s(w,x){return 1-3*x+3*w}function r(w,x){return 3*x-6*w}function q(w){return 3*w}function n(y,w,x){return((s(w,x)*y+r(w,x))*y+q(w))*y}function m(y,w,x){return 3*s(w,x)*y*y+2*r(w,x)*y+q(w)}function t(z){var x=z;for(var y=0;y<4;++y){var A=m(x,v,u);if(A===0){return x}var w=n(x,v,u)-z;x-=w/A}return x}if(v===p&&u===o){return{css:"linear",fn:function(w){return w}}}else{return{css:"cubic-bezier("+v+","+p+","+u+","+o+")",fn:function(w){return n(t(w),p,o)}}}};var j=function(n,m){this.element=n;this.$element=e(n);this.options=e.extend(true,{},j.defaults,m);if(this.options.containerSelector){this.$container=e(this.options.containerSelector)}else{this.$container=this.$element.is(k.body)?e(g):this.$element.parent()}if(this.$container.length!==1){return}this.namespace=this.options.namespace;this.attributes={vertical:{axis:"Y",overflow:"overflow-y",scroll:"scrollTop",scrollLength:"scrollHeight",pageOffset:"pageYOffset",ffPadding:"padding-right",length:"height",clientLength:"clientHeight",offsetLength:"offsetHeight",offset:"top",crossOffset:"left",crossLength:"width",crossClientLength:"clientWidth",crossOffsetLength:"offsetWidth"},horizontal:{axis:"X",overflow:"overflow-x",scroll:"scrollLeft",scrollLength:"scrollWidth",pageOffset:"pageXOffset",ffPadding:"padding-bottom",length:"width",clientLength:"clientWidth",offsetLength:"offsetWidth",offset:"left",crossOffset:"top",crossLength:"height",crossClientLength:"clientHeight",crossOffsetLength:"offsetHeight"}};this.classes={};this.easing=j.easing[this.options.easing]||j.easing.ease;this.duration=this.options.duration;this._frameId=null;this._states={};this.instanceId=(++h);this.vertical=false;this.horizontal=false;this.init()};e.extend(j.easing={},{ease:a(0.25,0.1,0.25,1),linear:a(0,0,1,1),"ease-in":a(0.42,0,1,1),"ease-out":a(0,0,0.58,1),"ease-in-out":a(0.42,0,0.58,1)});j.prototype={constructor:j,getActiveTarget:function(o){if(!this[o]){return}var q=this.getOffset(o),n=this.attributes[o],p=null,m=this.getContainerLength(o);e.each(this.lists,function(t,s){var u=s.offset[n.offset],r=s.$el[n.length]();if(u===q){p=t;return false}else{if(u>q&&u<q+m){p=t;return false}else{if(u<q&&u+r>q){p=t;return true}else{if(u>q+m){return false}}}}});return p},init:function(){var m=this;this.$targets=this.$element.find("[data-scroll-target]");this.lists={};if(this.getScrollLength("vertical")>0){this.vertical=true}if(this.getScrollLength("horizontal")>0){this.horizontal=true}this.$targets.each(function(){var n=e(this);m.lists[n.data("scrollTarget")]={$el:n,offset:n.offset()}});this.bindEvents()},bindEvents:function(){var m=this;e(g).on(this.eventNameWithId("resize"),function(){if(e(g).width()<m.options.mobile.width){m.duration=m.options.duration;m.easing=j.easing[m.options.easing]||j.easing.ease}});e(g).on(this.eventNameWithId("orientationchange"),function(){if(e(g).width()<m.options.mobile.width){m.duration=m.options.duration;m.easing=j.easing[m.options.easing]||j.easing.ease}});if(!this.horizontal&&!this.vertical){return}this.$container.on(this.eventName("scroll"),function(){if(m.vertical){m.trigger(m.eventName("active"),["vertical",m.getActiveTarget("vertical")])}if(m.horizontal){m.trigger(m.eventName("active"),["horizontal",m.getActiveTarget("horizontal")])}})},eventName:function(n){if(typeof n!=="string"||n===""){return"."+this.options.namespace}n=n.split(" ");var o=n.length;for(var m=0;m<o;m++){n[m]=n[m]+"."+this.options.namespace}return n.join(" ")},eventNameWithId:function(n){if(typeof n!=="string"||n===""){return this.options.namespace+"-"+this.instanceId}n=n.split(" ");var o=n.length;for(var m=0;m<o;m++){n[m]=n[m]+"."+this.options.namespace+"-"+this.instanceId}return n.join(" ")},trigger:function(n){var m=Array.prototype.slice.call(arguments,1),p=[this].concat(m);this.$element.trigger("AsScroll::"+n,p);n=n.replace(/\b\w+\b/g,function(q){return q.substring(0,1).toUpperCase()+q.substring(1)});var o="on"+n;if(typeof this.options[o]==="function"){this.options[o].apply(this,m)}},is:function(m){return this._states[m]&&this._states[m]>0},enter:function(m){if(this._states[m]===b){this._states[m]=0}this._states[m]++},leave:function(m){this._states[m]--},getOffset:function(o){var m=this.attributes[o],n=this.$element[0];return(n[m.pageOffset]||n[m.scroll])},getPercentOffset:function(m){return this.getOffset(m)/this.getScrollLength(m)},getContainerLength:function(m){return this.$container[0]===g?this.$container[this.attributes[m].length]():this.$container[0][this.attributes[m].clientLength]},getScrollLength:function(n){var m=this.$element[0][this.attributes[n].scrollLength];return m-this.getContainerLength(n)},scrollToTarget:function(q,p,n,o){if(typeof this.lists[p]==="undefined"){return}p=this.lists[p];var m=this.attributes[q],r=p.offset[m.offset];this.scrollTo(q,r,n,o)},scrollTo:function(q,p,m,o){var n=typeof p;if(n==="string"){if(i(p)){p=d(p)*this.getScrollLength(q)}p=parseFloat(p);n="number"}if(n!=="number"){return}this.move(q,p,m,o)},scrollBy:function(q,p,m,o){var n=typeof p;if(n==="string"){if(i(p)){p=d(p)*this.getScrollLength(q)}p=parseFloat(p);n="number"}if(n!=="number"){return}this.move(q,this.getOffset(q)+p,m,o)},move:function(t,u,o,s){if(!this[t]||typeof u!=="number"){return}var w=this;this.enter("moving");if(u<0){u=0}else{if(u>this.getScrollLength(t)){u=this.getScrollLength(t)}}var r=this.attributes[t];var v=function(){w.leave("moving")};if(s){this.$element[0][r.scroll]=u;if(o!==false){this.trigger("change",u/this.getScrollLength(t))}v()}else{w.enter("animating");var n=c();var m=w.getOffset(t);var q=u;var p=function(z){var x=(z-n)/w.duration;if(x>1){x=1}x=w.easing.fn(x);var y=parseFloat(m+x*(q-m),10);w.$element[0][r.scroll]=y;if(o!==false){w.trigger("change",u/w.getScrollLength(t))}if(x===1){f(w._frameId);w._frameId=null;w.leave("animating");v()}else{w._frameId=l(p)}};w._frameId=l(p)}},scrollXto:function(o,m,n){return this.scrollTo("horizontal",o,m,n)},scrollYto:function(o,m,n){return this.scrollTo("vertical",o,m,n)},scrollXby:function(o,m,n){return this.scrollBy("horizontal",o,m,n)},scrollYby:function(o,m,n){return this.scrollBy("vertical",o,m,n)},scrollXToTarget:function(o,m,n){return this.scrollToTarget("horizontal",o,m,n)},scrollYToTarget:function(o,m,n){return this.scrollToTarget("vertical",o,m,n)}};j.defaults={duration:800,easing:"ease",namespace:"asScroll",offsetTop:50,mobile:{width:768,duration:500,easing:"ease"}};e.fn.asScroll=function(m){if(typeof m==="string"){var o=m;var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var p=e.data(this,"asScroll");if(p&&typeof p[o]==="function"){p[o].apply(p,n)}})}else{return this.each(function(){var p=e.data(this,"asScroll");if(!p){p=new j(this,m);e.data(this,"asScroll",p)}})}}}(window,document,jQuery));