/*! jQuery asScrollable - v0.3.1 - 2015-06-15
* https://github.com/amazingSurge/jquery-asScrollable
* Copyright (c) 2015 amazingSurge; Licensed GPL */
(function(h,k,f,a,c){var g="asScrollable";var i=0;function d(){if(typeof h.performance!=="undefined"&&h.performance.now){return h.performance.now()}else{return Date.now()}}function j(o){return typeof o==="string"&&o.indexOf("%")!=-1}function b(o){if(o<0){o=0}else{if(o>1){o=1}}return parseFloat(o).toFixed(4)*100+"%"}function e(o){return parseFloat(o.slice(0,-1)/100,10)}var m=(function(){var p,o,n;o=h.navigator.userAgent;p=/(?=.+Mac OS X)(?=.+Firefox)/.test(o);if(!p){return false}n=/Firefox\/\d{2}\./.exec(o);if(n){n=n[0].replace(/\D+/g,"")}return p&&+n>23})();var l=f[g]=function(o,p){this.$element=f(p);o=this.options=f.extend({},l.defaults,o||{},this.$element.data("options")||{});this.classes={wrap:o.namespace,content:o.namespace+"-content",container:o.namespace+"-container",bar:o.namespace+"-bar",barHide:o.namespace+"-bar-hide",skin:o.skin};this.attributes={vertical:{axis:"Y",overflow:"overflow-y",scroll:"scrollTop",scrollLength:"scrollHeight",pageOffset:"pageYOffset",ffPadding:"padding-right",length:"height",clientLength:"clientHeight",offset:"offsetHeight",crossLength:"width",crossClientLength:"clientWidth",crossOffset:"offsetWidth"},horizontal:{axis:"X",overflow:"overflow-x",scroll:"scrollLeft",scrollLength:"scrollWidth",pageOffset:"pageXOffset",ffPadding:"padding-bottom",length:"width",clientLength:"clientWidth",offset:"offsetWidth",crossLength:"height",crossClientLength:"clientHeight",crossOffset:"offsetHeight"}};this._states={};this.horizontal=null;this.vertical=null;this.$bar=null;this._frameId=null;this._timeoutId=null;this.instanceId=(++i);this.easing=a.easing[this.options.easing]||a.easing.ease;var n=this.$element.css("position");if(this.options.containerSelector){this.$container=this.$element.find(this.options.containerSelector);this.$wrap=this.$element;if(n=="static"){this.$wrap.css("position","relative")}}else{this.$container=this.$element.wrap("<div>");this.$wrap=this.$container.parent();this.$wrap.height(this.$element.height());if(n!=="static"){this.$wrap.css("position",n)}else{this.$wrap.css("position","relative")}}if(this.options.contentSelector){this.$content=this.$container.find(this.options.contentSelector)}else{this.$content=this.$container.wrap("<div>");this.$container=this.$content.parent()}this.init()};l.defaults={namespace:g,skin:null,contentSelector:null,containerSelector:null,enabledClass:"is-enabled",disabledClass:"is-disabled",draggingClass:"is-dragging",hoveringClass:"is-hovering",scrollingClass:"is-scrolling",direction:"vertical",showOnHover:true,showOnBarHover:false,duration:500,easing:"ease-in",responsive:true,throttle:20,scrollbar:{}};l.prototype={constructor:l,init:function(){switch(this.options.direction){case"vertical":this.vertical=true;break;case"horizontal":this.horizontal=true;break;case"both":this.horizontal=true;this.vertical=true;break;case"auto":var o=this.$element.css("overflow-x"),n=this.$element.css("overflow-y");if(o==="scroll"||o==="auto"){this.horizontal=true}if(n==="scroll"||n==="auto"){this.vertical=true}break}if(!this.vertical&&!this.horizontal){return}this.$wrap.addClass(this.classes.wrap);this.$container.addClass(this.classes.container);this.$content.addClass(this.classes.content);if(this.options.skin){this.$wrap.addClass(this.classes.skin)}this.$wrap.addClass(this.options.enabledClass);if(this.vertical){this.$wrap.addClass(this.classes.wrap+"-vertical");this.initLayout("vertical");this.createBar("vertical")}if(this.horizontal){this.$wrap.addClass(this.classes.wrap+"-horizontal");this.initLayout("horizontal");this.createBar("horizontal")}this.bindEvents()},bindEvents:function(){var n=this;var o=this.options;if(o.responsive){f(h).on(this.eventNameWithId("orientationchange"),function(){n.update.call(n)});f(h).on(this.eventNameWithId("resize"),this.throttle(function(){n.update.call(n)},o.throttle))}if(!this.horizontal&&!this.vertical){return}this.$wrap.on(this.eventName("mouseenter"),function(){n.$wrap.addClass(n.options.hoveringClass);n.enter("hovering");n.trigger("hover")});this.$wrap.on(this.eventName("mouseleave"),function(){n.$wrap.removeClass(n.options.hoveringClass);if(!n.is("hovering")){return}n.leave("hovering");n.trigger("hovered")});if(o.showOnHover){if(o.showOnBarHover){this.$bar.on("asScrollbar::hover",function(){n.showBar(this.direction)}).on("asScrollbar::hovered",function(){n.hideBar(this.direction)})}else{this.$element.on(g+"::hover",f.proxy(this.showBar,this));this.$element.on(g+"::hovered",f.proxy(this.hideBar,this))}}this.$container.on(this.eventName("scroll"),function(){if(n.horizontal){var q=n.offsetLeft;n.offsetLeft=n.getOffset("horizontal");if(q!==n.offsetLeft){n.trigger("scroll",n.getPercentOffset("horizontal"),"horizontal");if(n.offsetLeft===0){n.trigger("scrolltop","horizontal")}if(n.offsetLeft===n.getScrollLength("horizontal")){n.trigger("scrollend","horizontal")}}}if(n.vertical){var p=n.offsetTop;n.offsetTop=n.getOffset("vertical");if(p!==n.offsetTop){n.trigger("scroll",n.getPercentOffset("vertical"),"vertical");if(n.offsetTop===0){n.trigger("scrolltop","vertical")}if(n.offsetTop===n.getScrollLength("vertical")){n.trigger("scrollend","vertical")}}}});this.$element.on(g+"::scroll",function(t,p,r,s){if(!n.is("scrolling")){n.enter("scrolling");n.$wrap.addClass(n.options.scrollingClass)}var q=p.getBarApi(s);q.moveTo(b(r),false,true);clearTimeout(n._timeoutId);n._timeoutId=setTimeout(function(){n.$wrap.removeClass(n.options.scrollingClass);n.leave("scrolling")},200)});this.$bar.on("asScrollbar::change",function(r,p,q){n.scrollTo(this.direction,b(q),false,true)});this.$bar.on("asScrollbar::drag",function(){n.$wrap.addClass(n.options.draggingClass)}).on("asScrollbar::dragged",function(){n.$wrap.removeClass(n.options.draggingClass)})},unbindEvents:function(){this.$wrap.off(this.eventName());this.$element.off(g+"::scroll").off(g+"::hover").off(g+"::hovered");this.$container.off(this.eventName());f(h).off(this.eventNameWithId())},initLayout:function(q){if(q==="vertical"){this.$container.css("height",this.$wrap.height())}var o=this.attributes[q],n=this.$container[0];var p=this.getBrowserScrollbarWidth(q),r=n.parentNode[o.crossClientLength];this.$content.css(o.crossLength,r+"px");this.$container.css(o.crossLength,p+r+"px");if(p===0&&m){this.$container.css(o.ffPadding,16)}},createBar:function(p){var n=f.extend(this.options.scrollbar,{namespace:this.classes.bar,direction:p,useCssTransitions:false,keyboard:false});var o=f("<div>");o.asScrollbar(n);if(this.options.showOnHover){o.addClass(this.classes.barHide)}o.appendTo(this.$wrap);this["$"+p]=o;if(this.$bar===null){this.$bar=o}else{this.$bar=this.$bar.add(o)}this.updateBarHandle(p)},trigger:function(o){var n=Array.prototype.slice.call(arguments,1),q=[this].concat(n);this.$element.trigger(g+"::"+o,q);o=o.replace(/\b\w+\b/g,function(r){return r.substring(0,1).toUpperCase()+r.substring(1)});var p="on"+o;if(typeof this.options[p]==="function"){this.options[p].apply(this,n)}},is:function(n){return this._states[n]&&this._states[n]>0},enter:function(n){if(this._states[n]===c){this._states[n]=0}this._states[n]++},leave:function(n){this._states[n]--},eventName:function(o){if(typeof o!=="string"||o===""){return"."+this.options.namespace}o=o.split(" ");var p=o.length;for(var n=0;n<p;n++){o[n]=o[n]+"."+this.options.namespace}return o.join(" ")},eventNameWithId:function(o){if(typeof o!=="string"||o===""){return this.options.namespace+"-"+this.instanceId}o=o.split(" ");var p=o.length;for(var n=0;n<p;n++){o[n]=o[n]+"."+this.options.namespace+"-"+this.instanceId}return o.join(" ")},throttle:function(o,r){var p=Date.now||function(){return new Date().getTime()};var n,t,v;var u=null;var s=0;var q=function(){s=p();u=null;v=o.apply(n,t);n=t=null};return function(){var w=p();var x=r-(w-s);n=this;t=arguments;if(x<=0){clearTimeout(u);u=null;s=w;v=o.apply(n,t);n=t=null}else{if(!u){u=setTimeout(q,x)}}return v}},getBrowserScrollbarWidth:function(q){var n=this.attributes[q],o,p;if(n.scrollbarWidth){return n.scrollbarWidth}o=k.createElement("div");p=o.style;p.position="absolute";p.width="100px";p.height="100px";p.overflow="scroll";p.top="-9999px";k.body.appendChild(o);n.scrollbarWidth=o[n.offset]-o[n.clientLength];k.body.removeChild(o);return n.scrollbarWidth},getOffset:function(p){var o=this.attributes[p],n=this.$container[0];return(n[o.pageOffset]||n[o.scroll])},getPercentOffset:function(n){return this.getOffset(n)/this.getScrollLength(n)},getContainerLength:function(n){return this.$container[0][this.attributes[n].clientLength]},getScrollLength:function(o){var n=this.$content[0][this.attributes[o].scrollLength];return n-this.getContainerLength(o)},scrollTo:function(r,q,n,p){var o=typeof q;if(o==="string"){if(j(q)){q=e(q)*this.getScrollLength(r)}q=parseFloat(q);o="number"}if(o!=="number"){return}this.move(r,q,n,p)},scrollBy:function(r,q,n,p){var o=typeof q;if(o==="string"){if(j(q)){q=e(q)*this.getScrollLength(r)}q=parseFloat(q);o="number"}if(o!=="number"){return}this.move(r,this.getOffset(r)+q,n,p)},move:function(u,v,p,t){if(this[u]!==true||typeof v!=="number"){return}var x=this;this.enter("moving");if(v<0){v=0}else{if(v>this.getScrollLength(u)){v=this.getScrollLength(u)}}var s=this.attributes[u];var w=function(){x.leave("moving")};if(t){this.$container[0][s.scroll]=v;if(p!==false){this.trigger("change",v/this.getScrollLength(u))}w()}else{x.enter("animating");var o=d();var n=x.getOffset(u);var r=v;var q=function(A){var y=(A-o)/x.options.duration;if(y>1){y=1}y=x.easing.fn(y);var z=parseFloat(n+y*(r-n),10);x.$container[0][s.scroll]=z;if(p!==false){x.trigger("change",v/x.getScrollLength(u))}if(y===1){h.cancelAnimationFrame(x._frameId);x._frameId=null;x.leave("animating");w()}else{x._frameId=h.requestAnimationFrame(q)}};x._frameId=h.requestAnimationFrame(q)}},scrollXto:function(p,n,o){return this.scrollTo("horizontal",p,n,o)},scrollYto:function(p,n,o){return this.scrollTo("vertical",p,n,o)},scrollXby:function(p,n,o){return this.scrollBy("horizontal",p,n,o)},scrollYby:function(p,n,o){return this.scrollBy("vertical",p,n,o)},getBar:function(n){if(n&&this["$"+n]){return this["$"+n]}else{return this.$bar}},getBarApi:function(n){return this.getBar(n).data("asScrollbar")},getBarX:function(){return this.getBar("horizontal")},getBarY:function(){return this.getBar("vertical")},showBar:function(n){this.getBar(n).removeClass(this.classes.barHide)},hideBar:function(n){this.getBar(n).addClass(this.classes.barHide)},updateBarHandle:function(q){var p=this.getBarApi(q);var n=this.getScrollLength(q),o=this.getContainerLength(q);if(n>0){if(p.is("disabled")){p.enable()}p.setHandleLength(p.getBarLength()*o/(n+o),true)}else{p.disable()}},disable:function(){if(!this.is("disabled")){this.enter("disabled");this.$wrap.addClass(this.options.disabledClass).removeClass(this.options.enabledClass);this.unbindEvents();this.unStyle()}},enable:function(){if(this.is("disabled")){this.leave("disabled");this.$wrap.addClass(this.options.enabledClass).removeClass(this.options.disabledClass);this.bindEvents();this.update()}},update:function(){if(this.is("disabled")){return}if(this.vertical){this.initLayout("vertical");this.updateBarHandle("vertical")}if(this.horizontal){this.initLayout("horizontal");this.updateBarHandle("horizontal")}},unStyle:function(){if(this.horizontal){this.$container.css({height:"","padding-bottom":""});this.$content.css({height:""})}if(this.vertical){this.$container.css({width:"",height:"","padding-right":""});this.$content.css({width:""})}if(!this.options.containerSelector){this.$wrap.css({height:""})}},destory:function(){this.$wrap.removeClass(this.classes.wrap+"-vertical").removeClass(this.classes.wrap+"-horizontal").removeClass(this.classes.wrap).removeClass(this.options.enabledClass).removeClass(this.classes.disabledClass);this.unStyle();if(this.$bar){this.$bar.remove()}this.unbindEvents();if(this.options.containerSelector){this.$container.removeClass(this.classes.container)}else{this.$container.unwrap()}if(!this.options.contentSelector){this.$content.unwrap()}this.$content.removeClass(this.classes.content);this.$element.data(g,null)}};f.fn[g]=function(n){if(typeof n==="string"){var q=n;var o=Array.prototype.slice.call(arguments,1);if(/^\_/.test(q)){return false}else{if((/^(get)/.test(q))){var p=this.first().data(g);if(p&&typeof p[q]==="function"){return p[q].apply(p,o)}}else{return this.each(function(){var r=f.data(this,g);if(r&&typeof r[q]==="function"){r[q].apply(r,o)}})}}}else{return this.each(function(){if(!f(this).data(g)){f(this).data(g,new l(n,this))}else{f(this).data(g).update()}})}return this}})(window,document,jQuery,(function(a){if(a.asScrollbar===undefined){return false}else{return a.asScrollbar}}(jQuery)));