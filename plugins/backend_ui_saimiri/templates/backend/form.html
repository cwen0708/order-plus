{% import 'backend/macros.html' as s with context %}
{% import 'macros/form.html' as f with context %}
{% extends s.layout() %}

{% block layout_content %}
<h1>{% block title_text %}{% endblock %}</h1>
{% block form_tag %}
<form method="POST" action="{{scaffolding.form_action|default(this.uri(_pass_all=True), True)}}" class="form" enctype="{{scaffolding.form_encoding|default('application/x-www-form-urlencoded', True)}}" role="form"
       accept-charset="UTF-8">
{% endblock %}

    {{this.events.before_form_fields()}}

    {% block form_fields %}
        {% for field in form %}
            {% if not field.name in scaffolding.excluded_form_fields %}
                {{ f.form_field(form, field) }}
            {% endif %}
        {% endfor %}
    {% endblock %}


    {% block form_actions %}
    <div class="controls form-actions">
        {% block submit_button %}
            {% if this.route.prefix == 'admin' %}
            <a class="btn btn-primary btn-submit" type="submit"><i class="glyphicon glyphicon-floppy-disk"></i>
                {{ this.route.prefix }}
                {% block submit_text %}Submit{% endblock %}
            </a>
            {% else %}
                <button>{% block submit_text_2 %}Submit{% endblock %}</button>
            {% endif %}
        {% endblock %}
        {% block cancel_button %}
            {% if uri_exists(action='list') %}
            <a class="btn btn-default btn-cancel" href="{{uri(action='list')}}">
                {% block cancel_text %}Cancel{% endblock %}
            </a>
            {% endif %}
        {% endblock %}
    </div>
    {% endblock %}

    {{this.events.after_form_fields()}}

</form>
{% endblock %}
