namespace="comment_";(function(){function e(f,j,h,g,i){return testCM(f,function(k){h(k);eq(k.getValue(),i)},{value:g,mode:j})}var a="function foo() {\n  return bar;\n}";var c="foo(/* bar */ true);";var d="foo(/* bar */ true, /* baz */ false);";var b=["above();","foo(/* bar */ true);","below();"];e("block","javascript",function(f){f.blockComment(Pos(0,3),Pos(3,0),{blockCommentLead:" *"})},a+"\n","/* function foo() {\n *   return bar;\n * }\n */");e("blockToggle","javascript",function(f){f.blockComment(Pos(0,3),Pos(2,0),{blockCommentLead:" *"});f.uncomment(Pos(0,3),Pos(2,0),{blockCommentLead:" *"})},a,a);e("blockToggle2","javascript",function(f){f.setCursor({line:0,ch:7});f.execCommand("toggleComment")},c,"foo(bar true);");e("line","javascript",function(f){f.lineComment(Pos(1,1),Pos(1,1))},a,"function foo() {\n//   return bar;\n}");e("lineToggle","javascript",function(f){f.lineComment(Pos(0,0),Pos(2,1));f.uncomment(Pos(0,0),Pos(2,1))},a,a);e("fallbackToBlock","css",function(f){f.lineComment(Pos(0,0),Pos(2,1))},"html {\n  border: none;\n}","/* html {\n  border: none;\n} */");e("fallbackToLine","ruby",function(f){f.blockComment(Pos(0,0),Pos(1))},"def blah()\n  return hah\n","# def blah()\n#   return hah\n");e("ignoreExternalBlockComments","javascript",function(f){f.execCommand("toggleComment")},d,"// "+d);e("ignoreExternalBlockComments2","javascript",function(f){f.setCursor({line:0,ch:null});f.execCommand("toggleComment")},d,"// "+d);e("ignoreExternalBlockCommentsMultiLineAbove","javascript",function(f){f.setSelection({line:0,ch:0},{line:1,ch:1});f.execCommand("toggleComment")},b.join("\n"),["// "+b[0],"// "+b[1],b[2]].join("\n"));e("ignoreExternalBlockCommentsMultiLineBelow","javascript",function(f){f.setSelection({line:1,ch:13},{line:2,ch:1});f.execCommand("toggleComment")},b.join("\n"),[b[0],"// "+b[1],"// "+b[2]].join("\n"));e("commentRange","javascript",function(f){f.blockComment(Pos(1,2),Pos(1,13),{fullLines:false})},a,"function foo() {\n  /*return bar;*/\n}");e("indented","javascript",function(f){f.lineComment(Pos(1,0),Pos(2),{indent:true})},a,"function foo() {\n//   return bar;\n// }");e("singleEmptyLine","javascript",function(f){f.setCursor(1);f.execCommand("toggleComment")},"a;\n\nb;","a;\n// \nb;");e("dontMessWithStrings","javascript",function(f){f.execCommand("toggleComment")},'console.log("/*string*/");','// console.log("/*string*/");');e("dontMessWithStrings2","javascript",function(f){f.execCommand("toggleComment")},'console.log("// string");','// console.log("// string");');e("dontMessWithStrings3","javascript",function(f){f.execCommand("toggleComment")},'// console.log("// string");','console.log("// string");')})();