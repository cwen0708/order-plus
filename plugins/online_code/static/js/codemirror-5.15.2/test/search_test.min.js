(function(){function b(d){var e=Array.prototype.slice.call(arguments,1,arguments.length-1).join("\n");var c=arguments[arguments.length-1];return window.test("search_"+d,function(){c(new CodeMirror.Doc(e))})}function a(g,f,c){var h=g.getSearchCursor(f,null,c);for(var d=3;d<arguments.length;d+=4){var e=h.findNext();is(e,"not enough results (forward)");eqPos(Pos(arguments[d],arguments[d+1]),h.from(),"from, forward, "+(d-3)/4);eqPos(Pos(arguments[d+2],arguments[d+3]),h.to(),"to, forward, "+(d-3)/4)}is(!h.findNext(),"too many matches (forward)");for(var d=arguments.length-4;d>=3;d-=4){var e=h.findPrevious();is(e,"not enough results (backwards)");eqPos(Pos(arguments[d],arguments[d+1]),h.from(),"from, backwards, "+(d-3)/4);eqPos(Pos(arguments[d+2],arguments[d+3]),h.to(),"to, backwards, "+(d-3)/4)}is(!h.findPrevious(),"too many matches (backwards)")}b("simple","abcdefg","abcdefg",function(c){a(c,"cde",false,0,2,0,5,1,2,1,5)});b("multiline","hallo","goodbye",function(c){a(c,"llo\ngoo",false,0,2,1,3);a(c,"blah\nhall",false);a(c,"bye\neye",false)});b("regexp","abcde","abcde",function(c){a(c,/bcd/,false,0,1,0,4,1,1,1,4);a(c,/BCD/,false);a(c,/BCD/i,false,0,1,0,4,1,1,1,4)});b("insensitive","hallo","HALLO","oink","hAllO",function(c){a(c,"All",false,3,1,3,4);a(c,"All",true,0,1,0,4,1,1,1,4,3,1,3,4)});b("multilineInsensitive","zie ginds komT","De Stoomboot","uit Spanje weer aan",function(c){a(c,"komt\nde stoomboot\nuit",false);a(c,"komt\nde stoomboot\nuit",true,0,10,2,3);a(c,"kOMt\ndE stOOmboot\nuiT",true,0,10,2,3)});b("expandingCaseFold","<b>İİ İİ</b>","<b>uu uu</b>",function(c){if(phantom){return}a(c,"</b>",true,0,8,0,12,1,8,1,12);a(c,"İİ",true,0,3,0,5,0,6,0,8)})})();