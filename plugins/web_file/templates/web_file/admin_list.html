{% import 'backend/macros.html' as s with context %}
{% extends s.layout() %}

{% block layout_content %}
{% set list = context[scaffolding.plural] %}
<div class="records" data-cursor="{{ this.request.params.get("cursor") }}">
    <h1>{{ scaffolding.title }} <a href="{{s.action_uri('add') }}" title="新增" class="btn-add-record"><i class="glyphicon glyphicon-pencil"></i></a>{{s.next_page_link()}}</h1>
    <ul class="records-list">
        {%- set n = 0 -%}
        {% for item in list %}
            {%- set n = n + 1 -%}
            <li data-edit-url="{{s.edit_url(item, 'edit')}}"
                data-delete-url="{{s.edit_url(item, 'delete')}}"
                data-sort-up-url="{{s.edit_url(item, 'sort_up')}}"
                data-sort-down-url="{{s.edit_url(item, 'sort_down')}}"
                data-title="<img src='/userfile/{{ item["file"] }}' style='height: 100px;' />"
                data-desc="{{ item["modified"] }}">
                <div class="list-item"><h3><img src="/userfile/{{ item["file"] }}" style='height: 100px;'  /></h3><p><small>{{ item["modified"] }}</small></p></div></li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
